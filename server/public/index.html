<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Page Title</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
</head>

<body>
  <div>Register new product</div>
  <form method="POST" action="http://localhost:5000/api/doctor/products" enctype="multipart/form-data">
    <input type="text" name="name" placeholder="Name">
    <input type="number" name="price" placeholder="Price">
    <input type="text" name="quantity_unit" placeholder="Unit">
    <input type="file" name="images" placeholder="Choose images" multiple>
  </form>

  <button>Submit</button>

  <script>
    const form = document.querySelector('form');
    const input = document.querySelectorAll('input');
    const button = document.querySelector('button');
    const token = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiIxMjM0NTY3ODkiLCJpYXQiOjE2NTY5MDM2MDF9.VZuughQ1NsWrY4crR1Zh-9nr8HET5hrvd8szYVLaYVs'

    button.onclick = () => {
      const obj = {
        name: input[0].value,
        price: input[1].value,
        quantity_unit: input[2].value,
        images: input[3].files,
      }

      const formData = new FormData();
      formData.append('name', obj.name);
      formData.append('price', obj.price);
      formData.append('quantity_unit', obj.quantity_unit);
      for (let i = 0; i < obj.images.length; i++) {
        formData.append('images', obj.images[i]);
      }

      fetch('http://localhost:5000/api/doctor/products', {
        method: 'POST',
        body: formData,
        headers: {
          'Authorization': `Bearer ${token}`
        }

      }).then(res => res.json()).then(data => {
        console.log(data);
      })
        .catch(err => console.log(err));
    }

  </script>
</body>

</html>